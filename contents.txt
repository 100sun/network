Table of Contents
Chapter 1 Computer Networks and the Internet 1
1.1 What Is the Internet? 2
1.1.1 A Nuts-and-Bolts Description 2
1.1.2 A Services Description 5
1.1.3 What Is a Protocol? 7
1.2 The Network Edge 9
1.2.1 Access Networks 12
1.2.2 Physical Media 18
1.3 The Network Core 21
1.3.1 Packet Switching 23
1.3.2 Circuit Switching 27
1.3.3 A Network of Networks 31
1.4 Delay, Loss, and Throughput in Packet-Switched Networks 35
1.4.1 Overview of Delay in Packet-Switched Networks 35
1.4.2 Queuing Delay and Packet Loss 39
1.4.3 End-to-End Delay 41
1.4.4 Throughput in Computer Networks 43
1.5 Protocol Layers and Their Service Models 47
1.5.1 Layered Architecture 47
1.5.2 Encapsulation 53
1.6 Networks Under Attack 55
1.7 History of Computer Networking and the Internet 59
1.7.1 The Development of Packet Switching: 1961–1972 59
1.7.2 Proprietary Networks and Internetworking: 1972–1980 60
1.7.3 A Proliferation of Networks: 1980–1990 62
1.7.4 The Internet Explosion: The 1990s 63
1.7.5 The New Millennium 64
1.8 Summary 65
Homework Problems and Questions 67
Wireshark Lab 77
Interview: Leonard Kleinrock 79
Chapter 2 Application Layer 83
2.1 Principles of Network Applications 84
2.1.1 Network Application Architectures 86
2.1.2 Processes Communicating 88
2.1.3 Transport Services Available to Applications 90
2.1.4 Transport Services Provided by the Internet 93
2.1.5 Application-Layer Protocols 96
2.1.6 Network Applications Covered in This Book 97
2.2 The Web and HTTP 98
2.2.1 Overview of HTTP 98
2.2.2 Non-Persistent and Persistent Connections 100
2.2.3 HTTP Message Format 103
2.2.4 User-Server Interaction: Cookies 108
2.2.5 Web Caching 110
2.3 Electronic Mail in the Internet 116
2.3.1 SMTP 118
2.3.2 Comparison with HTTP 121
2.3.3 Mail Message Formats 121
2.3.4 Mail Access Protocols 122
2.4 DNS—The Internet’s Directory Service 126
2.4.1 Services Provided by DNS 127
2.4.2 Overview of How DNS Works 129
2.4.3 DNS Records and Messages 135
2.5 Peer-to-Peer Applications 140
2.5.1 P2P File Distribution 140
2.6 Video Streaming and Content Distribution Networks 147
2.6.1 Internet Video 148
2.6.2 HTTP Streaming and DASH 148
2.6.3 Content Distribution Networks 149
2.6.4 Case Studies: Netflix, YouTube, and Kankan 153
2.7 Socket Programming: Creating Network Applications 157
2.7.1 Socket Programming with UDP 159
2.7.2 Socket Programming with TCP 164
2.8 Summary 170
Homework Problems and Questions 171
Socket Programming Assignments 180
Wireshark Labs: HTTP, DNS 182
Interview: Marc Andreessen 184
Chapter 3 Transport Layer 187
3.1 Introduction and Transport-Layer Services 188
3.1.1 Relationship Between Transport and Network Layers 188
3.1.2 Overview of the Transport Layer in the Internet 191
3.2 Multiplexing and Demultiplexing 193
3.3 Connectionless Transport: UDP 200
3.3.1 UDP Segment Structure 204
3.3.2 UDP Checksum 204
3.4 Principles of Reliable Data Transfer 206
3.4.1 Building a Reliable Data Transfer Protocol 208
3.4.2 Pipelined Reliable Data Transfer Protocols 217
3.4.3 Go-Back-N (GBN) 221
3.4.4 Selective Repeat (SR) 226
3.5 Connection-Oriented Transport: TCP 233
3.5.1 The TCP Connection 233
3.5.2 TCP Segment Structure 236
3.5.3 Round-Trip Time Estimation and Timeout 241
3.5.4 Reliable Data Transfer 244
3.5.5 Flow Control 252
3.5.6 TCP Connection Management 255
3.6 Principles of Congestion Control 261
3.6.1 The Causes and the Costs of Congestion 261
3.6.2 Approaches to Congestion Control 268
3.7 TCP Congestion Control 269
3.7.1 Fairness 279
3.7.2 Explicit Congestion Notification (ECN): Network-assisted Congestion Control 282
3.8 Summary 284
Homework Problems and Questions 286
Programming Assignments 301
Wireshark Labs: Exploring TCP, UDP 302
Interview: Van Jacobson 303
Chapter 4 The Network Layer: Data Plane 305
4.1 Overview of Network Layer 306
4.1.1 Forwarding and Routing: The Network Data and Control Planes 306
4.1.2 Network Service Models 311
4.2 What’s Inside a Router? 313
4.2.1 Input Port Processing and Destination-Based Forwarding 316
4.2.2 Switching 319
4.2.3 Output Port Processing 321
4.2.4 Where Does Queuing Occur? 321
4.2.5 Packet Scheduling 325
4.3 The Internet Protocol (IP): IPv4, Addressing, IPv6, and More 329
4.3.1 IPv4 Datagram Format 330
4.3.2 IPv4 Datagram Fragmentation 332
4.3.3 IPv4 Addressing 334
4.3.4 Network Address Translation (NAT) 345
4.3.5 IPv6 348
4.4 Generalized Forwarding and SDN 354
4.4.1 Match 356
4.4.2 Action 358
4.4.3 OpenFlow Examples of Match-plus-action in Action 358
4.5 Summary 361
Homework Problems and Questions 361
Wireshark Lab 370
Interview: Vinton G. Cerf 371
Chapter 5 The Network Layer: Control Plane 373
5.1 Introduction 374
5.2 Routing Algorithms 376
5.2.1 The Link-State (LS) Routing Algorithm 379
5.2.2 The Distance-Vector (DV) Routing Algorithm 384
5.3 Intra-AS Routing in the Internet: OSPF 391
5.4 Routing Among the ISPs: BGP 395
5.4.1 The Role of BGP 395
5.4.2 Advertising BGP Route Information 396
5.4.3 Determining the Best Routes 398
5.4.4 IP-Anycast 402
5.4.5 Routing Policy 403
5.4.6 Putting the Pieces Together: Obtaining Internet Presence 406
5.5 The SDN Control Plane 407
5.5.1 The SDN Control Plane: SDN Controller and SDN Control Applications 410
5.5.2 OpenFlow Protocol 412
5.5.3 Data and Control Plane Interaction: An Example 414
5.5.4 SDN: Past and Future 415
5.6 ICMP: The Internet Control Message Protocol 419
5.7 Network Management and SNMP 421
5.7.1 The Network Management Framework 422
5.7.2 The Simple Network Management Protocol (SNMP) 424
5.8 Summary 426
Homework Problems and Questions 427
Socket Programming Assignment 433
Programming Assignment 434
Wireshark Lab 435
Interview: Jennifer Rexford 436
Chapter 6 The Link Layer and LANs 439
6.1 Introduction to the Link Layer 440
6.1.1 The Services Provided by the Link Layer 442
6.1.2 Where Is the Link Layer Implemented? 443
6.2 Error-Detection and -Correction Techniques 444
6.2.1 Parity Checks 446
6.2.2 Checksumming Methods 448
6.2.3 Cyclic Redundancy Check (CRC) 449
6.3 Multiple Access Links and Protocols 451
6.3.1 Channel Partitioning Protocols 453
6.3.2 Random Access Protocols 455
6.3.3 Taking-Turns Protocols 464
6.3.4 DOCSIS: The Link-Layer Protocol for Cable Internet Access 465
6.4 Switched Local Area Networks 467
6.4.1 Link-Layer Addressing and ARP 468
6.4.2 Ethernet 474
6.4.3 Link-Layer Switches 481
6.4.4 Virtual Local Area Networks (VLANs) 487
6.5 Link Virtualization: A Network as a Link Layer 491
6.5.1 Multiprotocol Label Switching (MPLS) 492
6.6 Data Center Networking 495
6.7 Retrospective: A Day in the Life of a Web Page Request 500
6.7.1 Getting Started: DHCP, UDP, IP, and Ethernet 500
6.7.2 Still Getting Started: DNS and ARP 502
6.7.3 Still Getting Started: Intra-Domain Routing to the DNS Server 503
6.7.4 Web Client-Server Interaction: TCP and HTTP 504
6.8 Summary 506
Homework Problems and Questions 507
Wireshark Lab 515
Interview: Simon S. Lam 516Table of Contents
Chapter 1 Computer Networks and the Internet 1
1.1 What Is the Internet? 2
1.1.1 A Nuts-and-Bolts Description 2
1.1.2 A Services Description 5
1.1.3 What Is a Protocol? 7
1.2 The Network Edge 9
1.2.1 Access Networks 12
1.2.2 Physical Media 18
1.3 The Network Core 21
1.3.1 Packet Switching 23
1.3.2 Circuit Switching 27
1.3.3 A Network of Networks 31
1.4 Delay, Loss, and Throughput in Packet-Switched Networks 35
1.4.1 Overview of Delay in Packet-Switched Networks 35
1.4.2 Queuing Delay and Packet Loss 39
1.4.3 End-to-End Delay 41
1.4.4 Throughput in Computer Networks 43
1.5 Protocol Layers and Their Service Models 47
1.5.1 Layered Architecture 47
1.5.2 Encapsulation 53
1.6 Networks Under Attack 55
1.7 History of Computer Networking and the Internet 59
1.7.1 The Development of Packet Switching: 1961–1972 59
1.7.2 Proprietary Networks and Internetworking: 1972–1980 60
1.7.3 A Proliferation of Networks: 1980–1990 62
1.7.4 The Internet Explosion: The 1990s 63
1.7.5 The New Millennium 64
1.8 Summary 65
Homework Problems and Questions 67
Wireshark Lab 77
Interview: Leonard Kleinrock 79
Chapter 2 Application Layer 83
2.1 Principles of Network Applications 84
2.1.1 Network Application Architectures 86
2.1.2 Processes Communicating 88
2.1.3 Transport Services Available to Applications 90
2.1.4 Transport Services Provided by the Internet 93
2.1.5 Application-Layer Protocols 96
2.1.6 Network Applications Covered in This Book 97
2.2 The Web and HTTP 98
2.2.1 Overview of HTTP 98
2.2.2 Non-Persistent and Persistent Connections 100
2.2.3 HTTP Message Format 103
2.2.4 User-Server Interaction: Cookies 108
2.2.5 Web Caching 110
2.3 Electronic Mail in the Internet 116
2.3.1 SMTP 118
2.3.2 Comparison with HTTP 121
2.3.3 Mail Message Formats 121
2.3.4 Mail Access Protocols 122
2.4 DNS—The Internet’s Directory Service 126
2.4.1 Services Provided by DNS 127
2.4.2 Overview of How DNS Works 129
2.4.3 DNS Records and Messages 135
2.5 Peer-to-Peer Applications 140
2.5.1 P2P File Distribution 140
2.6 Video Streaming and Content Distribution Networks 147
2.6.1 Internet Video 148
2.6.2 HTTP Streaming and DASH 148
2.6.3 Content Distribution Networks 149
2.6.4 Case Studies: Netflix, YouTube, and Kankan 153
2.7 Socket Programming: Creating Network Applications 157
2.7.1 Socket Programming with UDP 159
2.7.2 Socket Programming with TCP 164
2.8 Summary 170
Homework Problems and Questions 171
Socket Programming Assignments 180
Wireshark Labs: HTTP, DNS 182
Interview: Marc Andreessen 184
Chapter 3 Transport Layer 187
3.1 Introduction and Transport-Layer Services 188
3.1.1 Relationship Between Transport and Network Layers 188
3.1.2 Overview of the Transport Layer in the Internet 191
3.2 Multiplexing and Demultiplexing 193
3.3 Connectionless Transport: UDP 200
3.3.1 UDP Segment Structure 204
3.3.2 UDP Checksum 204
3.4 Principles of Reliable Data Transfer 206
3.4.1 Building a Reliable Data Transfer Protocol 208
3.4.2 Pipelined Reliable Data Transfer Protocols 217
3.4.3 Go-Back-N (GBN) 221
3.4.4 Selective Repeat (SR) 226
3.5 Connection-Oriented Transport: TCP 233
3.5.1 The TCP Connection 233
3.5.2 TCP Segment Structure 236
3.5.3 Round-Trip Time Estimation and Timeout 241
3.5.4 Reliable Data Transfer 244
3.5.5 Flow Control 252
3.5.6 TCP Connection Management 255
3.6 Principles of Congestion Control 261
3.6.1 The Causes and the Costs of Congestion 261
3.6.2 Approaches to Congestion Control 268
3.7 TCP Congestion Control 269
3.7.1 Fairness 279
3.7.2 Explicit Congestion Notification (ECN): Network-assisted Congestion Control 282
3.8 Summary 284
Homework Problems and Questions 286
Programming Assignments 301
Wireshark Labs: Exploring TCP, UDP 302
Interview: Van Jacobson 303
Chapter 4 The Network Layer: Data Plane 305
4.1 Overview of Network Layer 306
4.1.1 Forwarding and Routing: The Network Data and Control Planes 306
4.1.2 Network Service Models 311
4.2 What’s Inside a Router? 313
4.2.1 Input Port Processing and Destination-Based Forwarding 316
4.2.2 Switching 319
4.2.3 Output Port Processing 321
4.2.4 Where Does Queuing Occur? 321
4.2.5 Packet Scheduling 325
4.3 The Internet Protocol (IP): IPv4, Addressing, IPv6, and More 329
4.3.1 IPv4 Datagram Format 330
4.3.2 IPv4 Datagram Fragmentation 332
4.3.3 IPv4 Addressing 334
4.3.4 Network Address Translation (NAT) 345
4.3.5 IPv6 348
4.4 Generalized Forwarding and SDN 354
4.4.1 Match 356
4.4.2 Action 358
4.4.3 OpenFlow Examples of Match-plus-action in Action 358
4.5 Summary 361
Homework Problems and Questions 361
Wireshark Lab 370
Interview: Vinton G. Cerf 371
Chapter 5 The Network Layer: Control Plane 373
5.1 Introduction 374
5.2 Routing Algorithms 376
5.2.1 The Link-State (LS) Routing Algorithm 379
5.2.2 The Distance-Vector (DV) Routing Algorithm 384
5.3 Intra-AS Routing in the Internet: OSPF 391
5.4 Routing Among the ISPs: BGP 395
5.4.1 The Role of BGP 395
5.4.2 Advertising BGP Route Information 396
5.4.3 Determining the Best Routes 398
5.4.4 IP-Anycast 402
5.4.5 Routing Policy 403
5.4.6 Putting the Pieces Together: Obtaining Internet Presence 406
5.5 The SDN Control Plane 407
5.5.1 The SDN Control Plane: SDN Controller and SDN Control Applications 410
5.5.2 OpenFlow Protocol 412
5.5.3 Data and Control Plane Interaction: An Example 414
5.5.4 SDN: Past and Future 415
5.6 ICMP: The Internet Control Message Protocol 419
5.7 Network Management and SNMP 421
5.7.1 The Network Management Framework 422
5.7.2 The Simple Network Management Protocol (SNMP) 424
5.8 Summary 426
Homework Problems and Questions 427
Socket Programming Assignment 433
Programming Assignment 434
Wireshark Lab 435
Interview: Jennifer Rexford 436
Chapter 6 The Link Layer and LANs 439
6.1 Introduction to the Link Layer 440
6.1.1 The Services Provided by the Link Layer 442
6.1.2 Where Is the Link Layer Implemented? 443
6.2 Error-Detection and -Correction Techniques 444
6.2.1 Parity Checks 446
6.2.2 Checksumming Methods 448
6.2.3 Cyclic Redundancy Check (CRC) 449
6.3 Multiple Access Links and Protocols 451
6.3.1 Channel Partitioning Protocols 453
6.3.2 Random Access Protocols 455
6.3.3 Taking-Turns Protocols 464
6.3.4 DOCSIS: The Link-Layer Protocol for Cable Internet Access 465
6.4 Switched Local Area Networks 467
6.4.1 Link-Layer Addressing and ARP 468
6.4.2 Ethernet 474
6.4.3 Link-Layer Switches 481
6.4.4 Virtual Local Area Networks (VLANs) 487
6.5 Link Virtualization: A Network as a Link Layer 491
6.5.1 Multiprotocol Label Switching (MPLS) 492
6.6 Data Center Networking 495
6.7 Retrospective: A Day in the Life of a Web Page Request 500
6.7.1 Getting Started: DHCP, UDP, IP, and Ethernet 500
6.7.2 Still Getting Started: DNS and ARP 502
6.7.3 Still Getting Started: Intra-Domain Routing to the DNS Server 503
6.7.4 Web Client-Server Interaction: TCP and HTTP 504
6.8 Summary 506
Homework Problems and Questions 507
Wireshark Lab 515
Interview: Simon S. Lam 516